<!DOCTYPE html>
<html>
    <head>
        <title>{{article_title}}</title>
        <link rel="stylesheet" type="text/css" href="/css/style.css"></link>
        <link rel="stylesheet" type="text/css" href="/css/article.css"></link>
        <link rel="stylesheet" type="text/css" href="/css/customizestyle.css"></link>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            // 在加载CSS前设置初始主题
            function loadStyleString(css) {
                var style = document.createElement("style");
                style.type = "text/css";
                style.id = "preloaded-theme";
                try {
                    style.appendChild(document.createTextNode(css));
                } catch (ex) {
                    style.textContent = css;
                }
                var head = document.getElementsByTagName("head")[0];
                head.appendChild(style);
            }
            const Theme = localStorage.getItem('theme');
            // console.log(Theme);
            if (Theme == 'dark') {
                const css = localStorage.getItem('dark-theme-css');
                // console.log(css);
                loadStyleString(css)
            }
        </script>
    </head>
    <body>
        <div id="app">
            <div id="top-bar" class="top-bar display-flex justify-content-space-between align-items-center height-50px width-100">
                <div id="logo" class="logo display-flex align-items-center justify-content-center height-50px">
                    <a href="/" class="link width-30px height-30px padding-10px"><img src="/img/logo.webp" class="logo img width-30px height-30px" alt="logo"></a>
                    <span class="logo text padding-10px">{{global:TopBarTitle}}</span>
                </div>
                

                <div id="function-bar" class="function-bar display-flex align-items-center justify-content-center height-30px padding-10px">

                    <a href="#switch-theme" id="switch-theme-button" class="switch-theme-button button padding-10px width-30px height-30px">
                        <img src="/img/switchTheme.webp" class="switch-theme-icon img width-30px height-30px" alt="switch-theme">
                    </a>
                    
                    <a href="/feed/rss.xml" id="rss-button" class="rss-button button padding-10px width-30px height-30px">
                        <img src="/img/rss.webp" class="rss-icon img width-30px height-30px" alt="rss feed">
                    </a>

                    <a href="#history" id="history-button" class="history-button button padding-10px width-30px height-30px">
                        <img src="/img/history.webp" class="history-icon img width-30px height-30px" alt="hisotry">
                    </a>
                    
                    <a href="#edit" id="edit-button" class="edit-button button padding-10px width-30px height-30px">
                        <img src="/img/editmode.webp" class="edit-icon img width-30px height-30px" alt="edit article">
                    </a>
                    
                </div>
            </div>

            <div id="content-container" class="content-container display-flex justify-content-center width-100 height-100">
                <div id="article-container" class="article-container">
                <div id="article-header">
                    <div id="article-title" class="article-title">{{article_title}}</div>
                    <div id="article-info" class="article-info">
                        <div id="article-author" class="article-author">{{article_author}}</div>
                        <div id="article-date" class="article-date">{{article_date}}</div>
                    </div>
                </div>
                <div id="article-content" class="article-content">
                    {{article_content}}
                </div>
                <div id="article-comments" class="article-comments">
                    <!-- Comments here -->
                     {{comments}}
                </div>
                </div>
                <div id="outline-container" class="outline-container">
                    <div id="outline-content" class="outline-content">
                        <div id="outline-title" class="outline-title"></div>
                        <div id="outline-list" class="outline-list"></div>
                    </div>
                </div>
            </div>
            <div id="bottom-bar" class="bottom-bar display-flex flex-wrap justify-content-center height-50px width-100">
                {{rendered:bottom_bar}}
            </div>
        </div>

        <script src="/js/app.js"></script>
        <script src="/js/inject.js"></script>
        <script src="/js/article.js"></script>
        <script src="/js/editmode.js"></script>
        <script src="/js/tags.js"></script>
    </body>
</html>